import{Hooks as t,colorPalette as a,Chartisan as e}from"@chartisan/chartisan";import s from"chart.js";function r(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}function o(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,s)}return e}function n(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?o(Object(e),!0).forEach(function(a){r(t,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})}return t}class i extends t{colors(t=a){return this.custom(({data:a})=>{var e;return(null===(e=a.data)||void 0===e?void 0:e.datasets)&&(a.data.datasets=a.data.datasets.map((a,e)=>n(n({},a),{},{backgroundColor:t[e%t.length]}))),a})}borderColors(t=a){return this.custom(({data:a})=>{var e;return(null===(e=a.data)||void 0===e?void 0:e.datasets)&&(a.data.datasets=a.data.datasets.map((a,e)=>n(n({},a),{},{borderColor:t[e%t.length]}))),a})}pieColors(t=a){return this.custom(({data:a})=>{var e;return(null===(e=a.data)||void 0===e?void 0:e.datasets)&&(a.data.datasets=a.data.datasets.map((a,e,s)=>{var r,o;const i=new Array(null!==(r=null===(o=a.data)||void 0===o?void 0:o.length)&&void 0!==r?r:null==s?void 0:s.length).fill("");return n(n({},a),{},{backgroundColor:i.map((a,e)=>t[e%t.length])})})),a})}pieBorderColors(t=a){return this.custom(({data:a})=>{var e;return(null===(e=a.data)||void 0===e?void 0:e.datasets)&&(a.data.datasets=a.data.datasets.map((a,e,s)=>{var r,o;const i=new Array(null!==(r=null===(o=a.data)||void 0===o?void 0:o.length)&&void 0!==r?r:null==s?void 0:s.length).fill("");return n(n({},a),{},{borderColor:i.map((a,e)=>t[e%t.length])})})),a})}responsive(t=!0){return this.options({options:{maintainAspectRatio:!t}})}legend(t={}){return"boolean"==typeof t&&(t={display:t}),this.options({options:{legend:t}})}displayAxes(t=!0,a=!1){return this.options(a?{options:{scale:{display:t}}}:{options:{scales:{xAxes:[{display:t}],yAxes:[{display:t}]}}})}minimalist(t=!0){return this.legend({display:!t}),this.displayAxes(!t)}padding(t=5){return this.options({options:{layout:{padding:t}}})}datasets(t,a="bar"){return this.custom(({data:e})=>{var s;if(e.type="string"==typeof t?t:a,Array.isArray(t)&&(null===(s=e.data)||void 0===s?void 0:s.datasets)){const a=t.map(t=>"string"==typeof t?{type:t}:t);e.data.datasets=e.data.datasets.map((t,e)=>n(n({},t),a[e%a.length]))}return e})}title(t={}){return this.options({options:{title:"string"==typeof t?{text:t,display:!0}:n({display:!0},t)}})}beginAtZero(t=!0,a="y"){return this.options({options:{scales:{[`${a}Axes`]:[{ticks:{beginAtZero:t}}]}}})}precision(t,a="y"){return this.options({options:{scales:{[`${a}Axes`]:[{ticks:{precision:t}}]}}})}stepSize(t,a="y"){return this.options({options:{scales:{[`${a}Axes`]:[{ticks:{stepSize:t}}]}}})}tooltip(t){return"boolean"==typeof t&&(t={enabled:t}),this.options({options:{tooltips:t}})}legendCallback(t){return this.options({options:{legendCallback:t}})}animation(t){return this.options({options:{animation:t}})}}class d extends e{static mutateArray(t,a,e){let s;for(s=0;s<a.length;s++)if(s<t.length){if(e){e(t,a,s);continue}t[s]=a[s]}else t.push(a[s]);for(;s<t.length;)t.pop()}formatData(t){return{type:"bar",data:{labels:t.chart.labels,datasets:t.datasets.map(({name:t,values:a})=>({label:t,data:a}))},options:{}}}renewCanvas(){this.canvas&&this.body.removeChild(this.canvas),this.canvas=document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.body.appendChild(this.canvas)}onUpdate(t){this.chart&&this.chart.destroy(),this.renewCanvas(),this.chart=new s(this.canvas,t)}onBackgroundUpdate(t,a){var e,s;this.chart?(this.chart.options=n(n({},this.chart.options),t.options),this.chart.data.labels&&(null===(e=t.data)||void 0===e?void 0:e.labels)&&d.mutateArray(this.chart.data.labels,t.data.labels),this.chart.data.datasets&&(null===(s=t.data)||void 0===s?void 0:s.datasets)&&d.mutateArray(this.chart.data.datasets,t.data.datasets,(t,a,e)=>{d.mutateArray(t[e].data,a[e].data)}),this.chart.update(a)):this.onUpdate(t)}onDestroy(){this.chart&&this.chart.destroy()}toImage(){var t;return null===(t=this.chart)||void 0===t?void 0:t.toBase64Image()}legend(){var t,a;return null!==(t=null===(a=this.chart)||void 0===a?void 0:a.generateLegend())&&void 0!==t?t:void 0}}"undefined"!=typeof window&&(window.Chartisan=d,window.ChartisanHooks=i);export{d as Chartisan,i as ChartisanHooks};
//# sourceMappingURL=chartisan_chartjs.modern.js.map
