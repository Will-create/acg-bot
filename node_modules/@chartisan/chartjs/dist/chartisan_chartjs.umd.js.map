{"version":3,"file":"chartisan_chartjs.umd.js","sources":["../node_modules/deepmerge/dist/cjs.js","../node_modules/@chartisan/chartisan/dist/chartisan.module.js","../src/hooks.ts","../src/index.ts"],"sourcesContent":["'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","import t from\"deepmerge\";export{default as mergeOptions}from\"deepmerge\";function e(t){return\"labels\"in t}function n(t){return\"name\"in t&&\"values\"in t}function r(t){return\"chart\"in t&&\"datasets\"in t&&e(t.chart)&&t.datasets.every(function(t){return n(t)})}var i=function(){function t(){this.hooks=[]}var e=t.prototype;return e.custom=function(t){return this.hooks.push(t),this},e.options=function(t){return this.custom(function(e){return(0,e.merge)(e.data,t)})},e.merge=function(t){return this.hooks=[].concat(this.hooks,t.hooks),this},t}(),o=[\"#667EEA\",\"#F56565\",\"#48BB78\",\"#ED8936\",\"#9F7AEA\",\"#38B2AC\",\"#ECC94B\",\"#4299E1\",\"#ED64A6\"];function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h,u=\"\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n  \",d=\"\\n    margin-top: 1.5rem;\\n    text-transform: uppercase;\\n    letter-spacing: 0.2em;\\n    font-size: 0.75rem;\\n  \",f={general:function(t){var e=t.size,n=t.color;return'\\n    <svg\\n        role=\"img\"\\n        xmlns=\"http://www.w3.org/2000/svg\"\\n        width=\"'+e[0]+'\"\\n        height=\"'+e[1]+'\"\\n        viewBox=\"0 0 24 24\"\\n        aria-labelledby=\"refreshIconTitle\"\\n        stroke=\"'+n+'\"\\n        stroke-width=\"1\"\\n        stroke-linecap=\"square\"\\n        stroke-linejoin=\"miter\"\\n        fill=\"none\"\\n        color=\"'+n+'\"\\n    >\\n        <title id=\"refreshIconTitle\">Refresh</title>\\n        <polyline points=\"22 12 19 15 16 12\"/>\\n        <path d=\"M11,20 C6.581722,20 3,16.418278 3,12 C3,7.581722 6.581722,4 11,4 C15.418278,4 19,7.581722 19,12 L19,14\"/>\\n    </svg>\\n'}},p=function(t,e){return'\\n    <div style=\"'+u+'\">\\n    <div class=\"chartisan-refresh-chart\" style=\"\\n    cursor: pointer;\\n  \">\\n        '+f[t.type](t)+\"\\n    </div>\\n    \"+(\"\"!=t.text?'\\n            <div style=\"color: '+t.textColor+\"; \"+d+'\">\\n                '+t.text+\"\\n            </div>\\n            \":\"\")+\"\\n    \"+(t.debug?'\\n            <div style=\"\\n    margin-top: 1.5rem;\\n    text-transform: uppercase;\\n    letter-spacing: 0.2em;\\n    font-size: 0.6rem;\\n    color: #f56565;\\n  \">\\n                '+e.message+\"\\n            </div>\":\"\")+\"\\n    </div>\\n\"},g={bar:function(t){var e=t.size;return'\\n    <svg width=\"'+e[0]+'\" height=\"'+e[1]+'\" viewBox=\"0 0 135 140\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"'+t.color+'\">\\n        <rect y=\"10\" width=\"15\" height=\"120\" rx=\"6\">\\n            <animate attributeName=\"height\"\\n                begin=\"0.5s\" dur=\"1s\"\\n                values=\"120;110;100;90;80;70;60;50;40;140;120\" calcMode=\"linear\"\\n                repeatCount=\"indefinite\" />\\n            <animate attributeName=\"y\"\\n                begin=\"0.5s\" dur=\"1s\"\\n                values=\"10;15;20;25;30;35;40;45;50;0;10\" calcMode=\"linear\"\\n                repeatCount=\"indefinite\" />\\n        </rect>\\n        <rect x=\"30\" y=\"10\" width=\"15\" height=\"120\" rx=\"6\">\\n            <animate attributeName=\"height\"\\n                begin=\"0.25s\" dur=\"1s\"\\n                values=\"120;110;100;90;80;70;60;50;40;140;120\" calcMode=\"linear\"\\n                repeatCount=\"indefinite\" />\\n            <animate attributeName=\"y\"\\n                begin=\"0.25s\" dur=\"1s\"\\n                values=\"10;15;20;25;30;35;40;45;50;0;10\" calcMode=\"linear\"\\n                repeatCount=\"indefinite\" />\\n        </rect>\\n        <rect x=\"60\" width=\"15\" height=\"140\" rx=\"6\">\\n            <animate attributeName=\"height\"\\n                begin=\"0s\" dur=\"1s\"\\n                values=\"120;110;100;90;80;70;60;50;40;140;120\" calcMode=\"linear\"\\n                repeatCount=\"indefinite\" />\\n            <animate attributeName=\"y\"\\n                begin=\"0s\" dur=\"1s\"\\n                values=\"10;15;20;25;30;35;40;45;50;0;10\" calcMode=\"linear\"\\n                repeatCount=\"indefinite\" />\\n        </rect>\\n        <rect x=\"90\" y=\"10\" width=\"15\" height=\"120\" rx=\"6\">\\n            <animate attributeName=\"height\"\\n                begin=\"0.25s\" dur=\"1s\"\\n                values=\"120;110;100;90;80;70;60;50;40;140;120\" calcMode=\"linear\"\\n                repeatCount=\"indefinite\" />\\n            <animate attributeName=\"y\"\\n                begin=\"0.25s\" dur=\"1s\"\\n                values=\"10;15;20;25;30;35;40;45;50;0;10\" calcMode=\"linear\"\\n                repeatCount=\"indefinite\" />\\n        </rect>\\n        <rect x=\"120\" y=\"10\" width=\"15\" height=\"120\" rx=\"6\">\\n            <animate attributeName=\"height\"\\n                begin=\"0.5s\" dur=\"1s\"\\n                values=\"120;110;100;90;80;70;60;50;40;140;120\" calcMode=\"linear\"\\n                repeatCount=\"indefinite\" />\\n            <animate attributeName=\"y\"\\n                begin=\"0.5s\" dur=\"1s\"\\n                values=\"10;15;20;25;30;35;40;45;50;0;10\" calcMode=\"linear\"\\n                repeatCount=\"indefinite\" />\\n        </rect>\\n    </svg>\\n'}},m=function(t){return'\\n    <div style=\"'+u+'\">\\n        '+g[t.type](t)+\"\\n        \"+(\"\"!=t.text?'\\n                <div style=\"color: '+t.textColor+\"; \"+d+'\">\\n                    '+t.text+\"\\n                </div>\":\"\")+\"\\n    </div>\\n\"};!function(t){t.Initializing=\"initializing\",t.Loading=\"loading\",t.Error=\"error\",t.Show=\"show\",t.Destroyed=\"destroyed\"}(h||(h={}));var v=function(){function e(t){this.options={el:\".chartisan\",url:void 0,options:void 0,data:void 0,loader:{type:\"bar\",size:[35,35],color:\"#000\",text:\"Loading chart\",textColor:\"#a0aec0\"},error:{type:\"general\",size:[50,50],color:\"#f56565\",text:\"There was an error\",textColor:\"#a0aec0\",debug:!0},hooks:void 0},this.cstate=h.Initializing;var e=(this.options=l(l({},this.options),t)).el;if(\"string\"==typeof e){var n=document.querySelector(e);if(!n)throw Error(\"[Chartisan] Unable to find an element to bind the chart to a DOM element with the selector: '\"+e+\"'\");this.element=n}else this.element=e;if(this.element.querySelector(\".chartisan-controller\"))throw Error(\"[Chartisan] There seems to be a chart already at the element selected by: '\"+e+\"'\");this.controller=document.createElement(\"div\"),this.body=document.createElement(\"div\"),this.modal=document.createElement(\"div\"),this.bootstrap()}var n=e.prototype;return n.setModal=function(t){var e=t.show,n=void 0===e||e,r=t.color,i=t.content;this.modal.style.backgroundColor=void 0===r?\"#FFFFFF\":r,this.modal.style.display=n?\"flex\":\"none\",i&&(this.modal.innerHTML=i)},n.changeTo=function(t,e){switch(t){case h.Loading:this.setModal({show:!0,content:m(this.options.loader)});break;case h.Show:this.setModal({show:!1});break;case h.Error:this.setModal({show:!0,content:p(this.options.error,null!=e?e:new Error(\"Unknown Error\"))}),this.refreshEvent()}this.cstate=t},n.bootstrap=function(){this.element.appendChild(this.controller),this.controller.appendChild(this.body),this.controller.appendChild(this.modal),this.controller.setAttribute(\"style\",\"\\n    position: relative;\\n    height: 100%;\\n    width: 100%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n  \"),this.body.setAttribute(\"style\",\"\\n    position: relative;\\n    height: 100%;\\n    width: 100%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n  \"),this.modal.setAttribute(\"style\",\"\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n    justify-content: center;\\n    align-items: center;\\n  \"),this.update(this.options)},n.request=function(t){var e=this;if(!this.options.url)return this.onError(new Error(\"No URL provided to fetch the data.\"));fetch(this.options.url,this.options.options).then(function(t){return t.json()}).then(function(n){return e.onRawUpdate(n,t)}).catch(function(t){return e.onError(t)})},n.refreshEvent=function(){var t=this;this.controller.getElementsByClassName(\"chartisan-refresh-chart\")[0].addEventListener(\"click\",function(){return t.update()},{once:!0})},n.update=function(t){if((null==t?void 0:t.url)&&(this.options.url=t.url),(null==t?void 0:t.options)&&(this.options.options=t.options),null==t?void 0:t.data){var e;r(t.data)?e=t.data:((null==t?void 0:t.background)||this.changeTo(h.Loading),e=t.data());var n=this.getDataFrom(e);return this.changeTo(h.Show),t.background?this.onBackgroundUpdate(n,null==t?void 0:t.additional):this.onUpdate(n,null==t?void 0:t.additional)}(null==t?void 0:t.background)||this.changeTo(h.Loading),this.request(t)},n.destroy=function(){this.onDestroy(),this.controller.remove(),this.changeTo(h.Destroyed)},n.getDataFrom=function(e){var n=this.formatData(e);if(this.options.hooks)for(var r,i=function(t,e){var n;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if(\"string\"==typeof t)return c(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,void 0):void 0}}(t))){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}return(n=t[Symbol.iterator]()).next.bind(n)}(this.options.hooks.hooks);!(r=i()).done;)n=(0,r.value)({data:n,merge:t,server:e});return n},n.onRawUpdate=function(t,e){if(!r(t))return this.onError(new Error(\"Invalid server data\"));var n=this.getDataFrom(t);this.changeTo(h.Show),(null==e?void 0:e.background)?this.onBackgroundUpdate(n,null==e?void 0:e.additional):this.onUpdate(n,null==e?void 0:e.additional)},n.onError=function(t){this.changeTo(h.Error,t)},n.state=function(){return this.cstate},e}();export{h as ChartState,v as Chartisan,i as Hooks,o as colorPalette,p as error,e as isChartData,n as isDatasetData,r as isServerData,m as loader};\n//# sourceMappingURL=chartisan.module.js.map\n","import { colorPalette, Hooks as BaseHooks } from '@chartisan/chartisan'\nimport {\n  ChartType,\n  Scriptable,\n  ChartColor,\n  ChartDataSets,\n  ChartTitleOptions,\n  ChartLegendOptions,\n  ChartTooltipOptions,\n  ChartAnimationOptions,\n  ChartLayoutPaddingObject,\n} from 'chart.js'\nimport { CC } from './index'\n\n/**\n * Used as the interface for the types hook.\n */\nexport interface DatasetHook extends ChartDataSets {\n  type: ChartType | string\n}\n\nexport class Hooks extends BaseHooks<CC> {\n  /**\n   * Used to set the color color of a dataset.\n   */\n  colors(colors: (ChartColor | ChartColor[] | Scriptable<ChartColor>)[] = colorPalette): this {\n    return this.custom(({ data }) => {\n      if (data.data?.datasets)\n        data.data.datasets = data.data.datasets.map((dataset, index) => ({\n          ...dataset,\n          backgroundColor: colors[index % colors.length],\n        }))\n      return data\n    })\n  }\n\n  /**\n   * Set the pie border colors of the datasets.\n   */\n  borderColors(colors: (ChartColor | ChartColor[] | Scriptable<ChartColor>)[] = colorPalette): this {\n    return this.custom(({ data }) => {\n      if (data.data?.datasets)\n        data.data.datasets = data.data.datasets.map((dataset, index) => ({\n          ...dataset,\n          borderColor: colors[index % colors.length],\n        }))\n      return data\n    })\n  }\n\n  /**\n   * Set the pie colors of the datasets.\n   */\n  pieColors(colors: ChartColor[] = colorPalette): this {\n    return this.custom(({ data }) => {\n      if (data.data?.datasets) {\n        data.data.datasets = data.data.datasets.map((dataset, _, array) => {\n          const d = new Array(dataset.data?.length ?? array?.length).fill('')\n          return {\n            ...dataset,\n            // borderColor: d.map((_, i) => colors[i % colors.length]),\n            backgroundColor: d.map((_, i) => colors[i % colors.length]),\n          }\n        })\n      }\n      return data\n    })\n  }\n\n  /**\n   * Set the pie border colors of the datasets.\n   */\n  pieBorderColors(colors: ChartColor[] = colorPalette): this {\n    return this.custom(({ data }) => {\n      if (data.data?.datasets) {\n        data.data.datasets = data.data.datasets.map((dataset, _, array) => {\n          const d = new Array(dataset.data?.length ?? array?.length).fill('')\n          return {\n            ...dataset,\n            borderColor: d.map((_, i) => colors[i % colors.length]),\n          }\n        })\n      }\n      return data\n    })\n  }\n\n  /**\n   * Used to make the chart responsive.\n   */\n  responsive(value = true): this {\n    return this.options({ options: { maintainAspectRatio: !value } })\n  }\n\n  /**\n   * Set the chart legend options. If a boolean is\n   * supplied, it will be used as the display value.\n   */\n  legend(legend: boolean | ChartLegendOptions = {}): this {\n    if (typeof legend === 'boolean') legend = { display: legend }\n    return this.options({ options: { legend } })\n  }\n\n  /**\n   * Determines if the chart will show the axes.\n   */\n  displayAxes(display = true, strict = false): this {\n    return this.options(\n      strict\n        ? { options: { scale: { display } } }\n        : {\n            options: {\n              scales: { xAxes: [{ display }], yAxes: [{ display }] },\n            },\n          }\n    )\n  }\n\n  /**\n   * Creates a minimalist chart.\n   */\n  minimalist(value = true): this {\n    this.legend({ display: !value })\n    return this.displayAxes(!value)\n  }\n\n  /**\n   * Determines the padding of the chart.\n   */\n  padding(padding: number | ChartLayoutPaddingObject = 5): this {\n    return this.options({ options: { layout: { padding } } })\n  }\n\n  /**\n   * Set the dataset options. If a single string is provided, all the datasets\n   * will will be specified to the desired type. If an array is provided, if the\n   * inner element is a string, it will be used as a type, otherwise, the options\n   * will be applied, in both cases, to the nth position. Keep in mind that if the\n   * array length is less than the datasets, it will start from the start again.\n   */\n  datasets(types: ChartType | (ChartType | DatasetHook)[], general = 'bar'): this {\n    return this.custom(({ data }) => {\n      data.type = typeof types === 'string' ? types : general\n      if (Array.isArray(types) && data.data?.datasets) {\n        const t = types.map((e) => (typeof e === 'string' ? { type: e } : e))\n        data.data.datasets = data.data.datasets.map((dataset, index) => ({\n          ...dataset,\n          ...t[index % t.length],\n        }))\n      }\n      return data\n    })\n  }\n\n  /**\n   * Sets a title to the chart.\n   */\n  title(title: string | ChartTitleOptions = {}): this {\n    return this.options({\n      options: {\n        title: typeof title === 'string' ? { text: title, display: true } : { display: true, ...title },\n      },\n    })\n  }\n\n  /**\n   * Set the chart to begin at zero.\n   */\n  beginAtZero(beginAtZero = true, axe: 'x' | 'y' = 'y'): this {\n    return this.options({\n      options: { scales: { [`${axe}Axes`]: [{ ticks: { beginAtZero } }] } },\n    })\n  }\n\n  /**\n   * Set the chart to begin at zero.\n   */\n  precision(precision: number, axe: 'x' | 'y' = 'y'): this {\n    return this.options({\n      options: { scales: { [`${axe}Axes`]: [{ ticks: { precision } }] } },\n    })\n  }\n\n  /**\n   * Set the chart to begin at zero.\n   */\n  stepSize(stepSize: number, axe: 'x' | 'y' = 'y'): this {\n    return this.options({\n      options: { scales: { [`${axe}Axes`]: [{ ticks: { stepSize } }] } },\n    })\n  }\n\n  /**\n   * Sets the tooltip options for the chart.\n   */\n  tooltip(tooltips: boolean | ChartTooltipOptions): this {\n    if (typeof tooltips === 'boolean') tooltips = { enabled: tooltips }\n    return this.options({ options: { tooltips } })\n  }\n\n  /**\n   * Sometimes you need a very complex legend. In these cases,\n   * it makes sense to generate an HTML legend. Charts provide\n   * a generateLegend() method on their prototype that returns an\n   * HTML string for the legend. To configure how this legend\n   * is generated, you can change the legendCallback config property.\n   */\n  legendCallback(legendCallback: (chart: Chart) => string): this {\n    return this.options({ options: { legendCallback } })\n  }\n\n  /**\n   * Configures the animations of chart.js.\n   */\n  animation(animation: ChartAnimationOptions): this {\n    return this.options({ options: { animation } })\n  }\n}\n","import { Hooks } from './hooks'\nimport Chart, { ChartConfiguration, ChartUpdateProps } from 'chart.js'\nimport { isHook, ServerData, isChartisan, Chartisan as Base } from '@chartisan/chartisan'\n\nexport { Hooks as ChartisanHooks }\n\n/**\n * Used as an alias.\n */\nexport type CC = ChartConfiguration\n\n/**\n * Base chart class for ChartJS.\n */\nexport class Chartisan extends Base<CC> {\n  /**\n   * The chart canvas.\n   */\n  canvas?: HTMLCanvasElement\n\n  /**\n   * Stores the chart instance.\n   */\n  chart?: Chart\n\n  /**\n   * Helper to mutate an array manually (this is used\n   * because chartjs can only handle animations when the\n   * original array is modified).\n   */\n  static mutateArray<T>(dest: T[], src: T[], action?: (dest: T[], src: T[], index: number) => void) {\n    let i: number\n    for (i = 0; i < src.length; i++) {\n      if (i < dest.length) {\n        if (action) {\n          action(dest, src, i)\n          continue\n        }\n        dest[i] = src[i]\n        continue\n      }\n      dest.push(src[i])\n    }\n    while (i < dest.length) dest.pop()\n  }\n\n  /**\n   * Formats the data of the request to match the data that\n   * the chart needs (acording to the desired front-end).\n   */\n  protected formatData(response: ServerData): CC {\n    return {\n      type: 'bar',\n      data: {\n        labels: response.chart.labels,\n        datasets: response.datasets.map(({ name, values }) => ({\n          label: name,\n          data: values,\n        })),\n      },\n      options: {},\n    }\n  }\n\n  /**\n   * Renews the canvas for another chart to be used.\n   */\n  protected renewCanvas() {\n    if (this.canvas) this.body.removeChild(this.canvas)\n    this.canvas = document.createElement('canvas')\n    this.canvas.style.width = '100%'\n    this.canvas.style.height = '100%'\n    this.body.appendChild(this.canvas)\n  }\n\n  /**\n   * Handles a successfull response of the chart data.\n   */\n  protected onUpdate(data: CC) {\n    if (this.chart) this.chart.destroy()\n    this.renewCanvas()\n    this.chart = new Chart(this.canvas!, data)\n  }\n\n  /**\n   * Handles a successfull response of the chart data\n   * in the background (possibly, updating the values\n   * of the chart without creating a new one).\n   */\n  protected onBackgroundUpdate(data: CC, options?: ChartUpdateProps) {\n    if (this.chart) {\n      // Update the chart options.\n      this.chart.options = {\n        ...this.chart.options,\n        ...data.options,\n      }\n      // Update the labels.\n      if (this.chart.data.labels && data.data?.labels) {\n        Chartisan.mutateArray(this.chart.data.labels, data.data.labels)\n      }\n      // To update the data arrays, it need to be performed\n      // to the original one. If the original one is not modified\n      // no animation will be performed. Therefore, please don't\n      // try beeing smarter here.\n      if (this.chart.data.datasets && data.data?.datasets) {\n        Chartisan.mutateArray(this.chart.data.datasets, data.data.datasets, (dest, src, i) => {\n          Chartisan.mutateArray<(number | number[] | null | undefined) | Chart.ChartPoint>(dest[i].data!, src[i].data!)\n        })\n      }\n      this.chart.update(options)\n    } else this.onUpdate(data)\n  }\n\n  /**\n   * Destroys the chart instance if any.\n   */\n  protected onDestroy() {\n    if (this.chart) this.chart.destroy()\n  }\n\n  /**\n   * This returns a base 64 encoded string of the\n   * chart in it's current state.\n   */\n  toImage(): string | undefined {\n    return this.chart?.toBase64Image()\n  }\n\n  /**\n   * Returns an HTML string of a legend for that chart.\n   * The legend is generated from the legendCallback in the options.\n   */\n  legend(): string | undefined {\n    return (this.chart?.generateLegend() as string) ?? undefined\n  }\n}\n\ndeclare global {\n  /**\n   * Extends the Window interface.\n   */\n  interface Window {\n    /**\n     * The chartisan class to initiate it as a global variable\n     * bound to the window var.\n     */\n    Chartisan: isChartisan<CC>\n\n    /**\n     * Determines the hooks of the chart.\n     */\n    ChartisanHooks: isHook<CC>\n  }\n}\n\nif (typeof window !== 'undefined') {\n  window.Chartisan = Chartisan\n  window.ChartisanHooks = Hooks\n}\n"],"names":["isMergeableObject","value","isNonNullObject","stringValue","Object","prototype","toString","call","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","Symbol","for","cloneUnlessOtherwiseSpecified","options","clone","deepmerge","Array","isArray","defaultArrayMerge","target","source","concat","map","element","getKeys","keys","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getEnumerableOwnPropertySymbols","propertyIsOnObject","object","property","_","arrayMerge","sourceIsArray","destination","forEach","key","hasOwnProperty","propertyIsUnsafe","customMerge","getMergeFunction","mergeObject","all","array","Error","reduce","prev","next","r","t","e","chart","datasets","every","n","i","this","hooks","custom","push","merge","data","o","a","defineProperty","enumerable","configurable","writable","s","getOwnPropertyDescriptor","apply","l","arguments","length","getOwnPropertyDescriptors","defineProperties","c","h","u","d","f","general","size","color","p","type","text","textColor","debug","message","g","bar","m","Initializing","Loading","Show","Destroyed","v","el","url","loader","error","cstate","document","querySelector","controller","createElement","body","modal","bootstrap","setModal","show","content","style","backgroundColor","display","innerHTML","changeTo","refreshEvent","appendChild","setAttribute","update","request","onError","fetch","then","json","onRawUpdate","catch","getElementsByClassName","addEventListener","once","background","getDataFrom","onBackgroundUpdate","additional","onUpdate","destroy","onDestroy","remove","formatData","iterator","slice","constructor","name","from","test","done","TypeError","bind","server","state","Hooks","colors","colorPalette","_data$data","dataset","index","borderColors","_data$data2","borderColor","pieColors","_data$data3","_dataset$data","fill","pieBorderColors","_data$data4","_dataset$data2","responsive","maintainAspectRatio","legend","displayAxes","strict","scale","scales","xAxes","yAxes","minimalist","padding","layout","types","_data$data5","title","beginAtZero","axe","ticks","precision","stepSize","tooltip","tooltips","enabled","legendCallback","animation","BaseHooks","Chartisan","mutateArray","dest","src","action","pop","response","labels","label","values","renewCanvas","canvas","removeChild","width","height","Chart","toImage","_this$chart","toBase64Image","_this$chart2","generateLegend","undefined","Base","window","ChartisanHooks"],"mappings":"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"}