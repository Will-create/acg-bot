{"version":3,"sources":["../../src/js/dialog.js"],"names":["Default","button","type","label","dismiss","focus","Dialog","options","this","_confirmed","_options","_makeModal","_showModal","_btnOptions","btn","btns","k","_getInputValue","input","$","_input","val","_makeInput","tmpl","opts","tx","get","append","_this","header","title","message","buttons","forEach","action","_modal","appendTo","document","body","form","find","on","event","modal","setTimeout","e","remove","callback","arg","call","alert","confirm","prompt"],"mappings":";;;;;ycAeA,IAGMA,EAAU,CACZC,OAAQ,CACJC,KAAU,QACVC,MAAU,SACVC,SAAU,EACVC,OAAU,IAUZC,aAEF,SAAAA,EAAYC,GACRC,KAAKC,YAAa,EAClBD,KAAKE,SAAaH,EAClBC,KAAKG,aACLH,KAAKI,wCAeTC,YAAA,SAAYC,GACR,IAAIC,EAAOf,EAAQC,OAEnB,IAAI,IAAIe,KAAKD,EACY,oBAAXD,EAAIE,KACVF,EAAIE,GAAKD,EAAKC,IAGtB,OAAOF,KAGXG,eAAA,WACI,GAAIT,KAAKE,SAASQ,MAGlB,OAAOC,EAAEX,KAAKY,QAAQC,SAG1BC,WAAA,WACI,IAAIC,EAAQ,GACRL,EAAQV,KAAKE,SAASQ,MAE1B,OAAOA,EAAMhB,MACT,IAAK,WACDqB,EAAI,6FAAgGL,EAAMf,MAAtG,gBACR,MAEA,IAAK,SACD,IAAIqB,EAAO,GACX,IAAI,IAAIR,KAAKE,EACTM,GAAI,kBAAqBR,EAArB,KAA2BE,EAAMF,GAAjC,YACRO,EAAI,mEAAsEC,EAAtE,YACR,MAEA,QACID,EAAI,gBAAmBL,EAAMhB,KAAzB,4EAAyGgB,EAAMf,MAA/G,KAGZ,IAAIsB,EAAE,wFAEiCP,EAAMf,MAFvC,+BAON,OAFAK,KAAKY,OAASD,EAAEI,GAAMG,IAAI,GAEnBP,EAAEM,GAAIE,OAAOnB,KAAKY,WAG7BT,WAAA,WAAY,IAAAiB,EAAApB,KAEJqB,EAAS,GACVrB,KAAKE,SAASoB,QACbD,EAAM,6FAE4BrB,KAAKE,SAASoB,MAF1C,mOAUV,IAAIC,EAAU,GACXvB,KAAKE,SAASqB,UACbA,EAAO,MAASvB,KAAKE,SAASqB,QAAvB,QAGX,IAAIC,EAAU,GACdxB,KAAKE,SAASsB,QAAQC,QAAQ,SAAAnB,GAG1B,IAAIoB,GAFJpB,EAAMc,EAAKf,YAAYC,IAENV,QAAU,wBAA0B,uBACjDC,EAASS,EAAIT,MAAQ,mBAAqB,GAC9C2B,GAAO,wCAA2ClB,EAAIZ,KAAOG,EAAtD,IAA+D6B,EAA/D,IAAyEpB,EAAIX,MAA7E,cAGX,IAAIoB,EAAI,4MAIUM,EAJV,mFAMcE,EANd,qHAScC,EATd,2GAiBR,GAFAxB,KAAK2B,OAAShB,EAAEI,GAAMa,SAASC,SAASC,MAErC9B,KAAKE,SAASQ,MAAM,CACnB,IAAIqB,EAAO/B,KAAKc,aAChBH,EAAEX,KAAK2B,QAAQK,KAAK,eAAeb,OAAOY,GAG9CpB,EAAEX,KAAK2B,QAAQM,GAAG,QAAS,iBAAkB,SAAAC,GACzCd,EAAKnB,YAAa,EAClBU,EAAES,EAAKO,QAAQQ,MAAM,UAGzBxB,EAAEX,KAAK2B,QAAQM,GAAG,kBAAmB,SAAAC,GAGjC,GAFAE,WAAW,SAAAC,GAAC,OAAI1B,EAAES,EAAKO,QAAQW,UAAU,KAErClB,EAAKlB,SAASqC,SAAlB,CAGA,IAAIC,EAAMpB,EAAKnB,WACZmB,EAAKnB,YAAcmB,EAAKlB,SAASQ,QAChC8B,EAAMpB,EAAKX,kBAEfW,EAAKlB,SAASqC,SAASE,KAAKrB,EAAMoB,MAGtC7B,EAAEX,KAAK2B,QAAQM,GAAG,iBAAkB,SAAAC,GAC7Bd,EAAKR,OACJD,EAAES,EAAKR,QAAQf,QAEfc,EAAES,EAAKO,QAAQK,KAAK,oBAAoBnC,aAIpDO,WAAA,WACIO,EAAEX,KAAK2B,QAAQQ,MAAM,WAKlBO,MAAP,SAAapB,EAAOC,EAASgB,GACzB,IAAIzC,EAAO,CACPwB,MAAAA,EACAC,QAAAA,EACAgB,SAAAA,EACA7B,MAAO,KACPc,QAAS,CACL,CACI9B,KAAM,UACNG,OAAO,EACPF,MAAO,YAMhBgD,QAAP,SAAerB,EAAOC,EAASgB,GAC3B,IAAIzC,EAAO,CACPwB,MAAAA,EACAC,QAAAA,EACAgB,SAAAA,EACA7B,MAAO,KACPc,QAAS,CACL,CACI9B,KAAM,QACNC,MAAO,SACPC,SAAS,GAEb,CACIF,KAAM,UACNG,OAAO,EACPF,MAAO,YAMhBiD,OAAP,SAActB,EAAOC,EAASb,EAAO6B,GACjC,IAAIzC,EAAO,CACPwB,MAAAA,EACAC,QAAAA,EACAgB,SAAAA,EACA7B,MAAAA,EACAc,QAAS,CACL,CACI9B,KAAM,QACNC,MAAO,SACPC,SAAS,GAEb,CACIF,KAAM,UACNG,OAAO,EACPF,MAAO,+FA/LnB,MA7BmB,wCAiCnB,OAAOH,WAwMfmB,EAAC,OAASb","sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap Dialog (v0.0.1): dialog.js\n * Licensed under MIT (https://github.com/iqbalfn/bootstrap-dialog/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'dialog'\nconst VERSION            = '0.0.1'\n\nconst Default = {\n    button: {\n        type    : 'light',\n        label   : 'Cancel',\n        dismiss : false,\n        focus   : false\n    }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Dialog {\n\n    constructor(options){\n        this._confirmed = false\n        this._options   = options\n        this._makeModal()\n        this._showModal()\n    }\n\n    // Getters\n\n    static get VERSION() {\n        return VERSION\n    }\n\n    static get Default() {\n        return Default\n    }\n\n    // Private\n\n    _btnOptions(btn){\n        let btns = Default.button\n\n        for(let k in btns){\n            if(typeof btn[k] === 'undefined')\n                btn[k] = btns[k]\n        }\n\n        return btn\n    }\n\n    _getInputValue(){\n        if(!this._options.input)\n            return\n\n        return $(this._input).val()\n    }\n\n    _makeInput(){\n        let tmpl  = '';\n        let input = this._options.input\n\n        switch(input.type){\n            case 'textarea':\n                tmpl = `<textarea class=\"form-control bs-dialog-input\" id=\"bs-dialog-input\" rows=\"3\" placeholder=\"${input.label}\"></textarea>`\n            break;\n            \n            case 'select':\n                let opts = ''\n                for(let k in input)\n                    opts+= `<option value=\"${k}\">${input[k]}</option>`\n                tmpl = `<select class=\"custom-select my-1 mr-sm-2\" id=\"bs-dialog-input\">${opts}</select>`\n            break;\n\n            default:\n                tmpl = `<input type=\"${input.type}\" class=\"form-control bs-dialog-input\" id=\"bs-dialog-input\" placeholder=\"${input.label}\">`\n        }\n\n        let tx = `\n            <div class=\"form-group\">\n                <label for=\"bs-dialog-input\">${input.label}</label>\n            </div>`\n\n        this._input = $(tmpl).get(0)\n\n        return $(tx).append(this._input)\n    }\n\n    _makeModal(){\n        // headers\n        let header = ''\n        if(this._options.title){\n            header = `\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\">${this._options.title}</h5>\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                </div>`\n        }\n\n        // message\n        let message = ''\n        if(this._options.message)\n            message = `<p>${this._options.message}</p>`\n\n        // footer buttons\n        let buttons = ''\n        this._options.buttons.forEach(btn => {\n            btn = this._btnOptions(btn)\n\n            let action = btn.dismiss ? ' data-dismiss=\"modal\"' : ' data-confirm=\"true\"'\n            let focus  = btn.focus ? ' btn-focus-first' : ''\n            buttons+= `<button type=\"button\" class=\"btn btn-${btn.type}${focus}\"${action}>${btn.label}</button>`\n        })\n\n        let tmpl = `\n            <div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n                <div class=\"modal-dialog\" role=\"document\">\n                    <div class=\"modal-content\">\n                        ${header}\n                        <div class=\"modal-body\">\n                            ${message}\n                        </div>\n                        <div class=\"modal-footer\">\n                            ${buttons}\n                        </div>\n                    </div>\n                </div>\n            </div>`\n\n        this._modal = $(tmpl).appendTo(document.body)\n\n        if(this._options.input){\n            let form = this._makeInput()\n            $(this._modal).find('.modal-body').append(form)\n        }\n\n        $(this._modal).on('click', '[data-confirm]', event => {\n            this._confirmed = true\n            $(this._modal).modal('hide')\n        })\n\n        $(this._modal).on('hidden.bs.modal', event => {\n            setTimeout(e => $(this._modal).remove(), 1000)\n\n            if(!this._options.callback)\n                return\n\n            let arg = this._confirmed\n            if(this._confirmed && this._options.input)\n                arg = this._getInputValue()\n\n            this._options.callback.call(this, arg)\n        })\n\n        $(this._modal).on('shown.bs.modal', event => {\n            if(this._input)\n                $(this._input).focus()\n            else\n                $(this._modal).find('.btn-focus-first').focus()\n        })\n    }\n\n    _showModal(){\n        $(this._modal).modal('show')\n    }\n\n    // Static\n\n    static alert(title, message, callback){\n        new Dialog({\n            title,\n            message,\n            callback,\n            input: null,\n            buttons: [\n                {\n                    type: 'primary',\n                    focus: true,\n                    label: 'Ok'\n                }\n            ]\n        })\n    }\n    \n    static confirm(title, message, callback){\n        new Dialog({\n            title,\n            message,\n            callback,\n            input: null,\n            buttons: [\n                {\n                    type: 'light',\n                    label: 'Cancel',\n                    dismiss: true\n                },\n                {\n                    type: 'primary',\n                    focus: true,\n                    label: 'Ok'\n                }\n            ]\n        })\n    }\n\n    static prompt(title, message, input, callback){\n        new Dialog({\n            title,\n            message,\n            callback,\n            input,\n            buttons: [\n                {\n                    type: 'light',\n                    label: 'Cancel',\n                    dismiss: true\n                },\n                {\n                    type: 'primary',\n                    focus: true,\n                    label: 'Ok'\n                }\n            ]\n        })\n    }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$[NAME] = Dialog\n\nexport default Dialog"]}